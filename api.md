# API
The API base URL is: `http://example.com/api/v1/`.

## `POST /auth/login`
Logs the user in (starting a session within Spring using cookies ?).

Also not logged-in sessions must be able to call this API!

### Input
```json
{
    "username": "<username>",
    "password": "<plain_text_password>"
}
```

### Output
```json
{
    "success": "true|false",
    "sessionId": "<sessionId>
}
```

## `POST /auth/logout`
Logs the user out, terminating his session.

### Input
None

### Output
```json
{
    "success": "true|false"
}
```

## `GET /chats`
Returns a list of chats involving the logged-in user.

### Output
```json
[
    {
        "chatId": "<chatId>",
        "name": "<chatName>"
    },
    ...
]
```

## `GET /chat/<id>/messages?to=<to>&n=<n>`
Returns a list of `n` messages up to the time specified in `to` (time in ms).

`n` and `to` are optional and default to returning all messages (infinite `n`;
`to` set to now).

The user must be a member of the chat!

### Output
```json
[
    {
        "messageId": "<messageId>",
        "userId": "<userId>",
        "text": "<text>",
        "timestamp": "<timestamp>"
    },
    ...
]
```

## `GET /chat/<id>`
Returns information about the chat, including chat name and members.

The user must be a member of the chat!

### Output
```json
{
    "id": "<chatId>",
    "name": "<chatName>",
    "adminId": "<adminId>",
    "members":
        [
            {
                "userId": "userId",
                "username": "username"
            },
            ...
        ]
}
```
## `DELETE /chat/<cid>/member/<mid>`
Removes a user from the chat.

The user must be the chat admin (kick) or the same user (leave).

### Output
```json
{
    "success": "true|false"
}
```

## `POST /chat/<id>/members`
Adds a member to the chat.

The user must be the chat admin.

### Input
```json
{
    "userId": "<userId>"
}
```

### Output 
```json
{
    "success": "true|false"
}
```

## `POST /chat/<id>/messages`
Sends a new message to the chat.

The user must be a member of the chat.

### Input
```json
{
    "text": "<text>"
}
```
NB: `userId` is already in the session, `chatId` is in the url, `messageId` is 
autogenerated, `timestamp` is autogenerated. Therefore, only `text` needs to be 
sent.

### Output
```json
{
    "success": "true|false"
}
```

## `POST /chats`
Creates a new chat with the given users.

The creator used will become admin and will be inserted in the chat by default.

### Input
```json
{
    "name": "<name>",
    "members": [
        "<userId>",
        ...
    ]
}
```

### Output
```json
{
    "success": "true|false",
    "chatId": "<chatId>"
}
```

## `DELETE /chat/<id>`
Deletes a chat.

The user must be the chat administrator.

### Output
```json
{
    "success": "true|false"
}
```

## `POST /users`
Register a new user.

Also, not logged-in sessions must be able to call this API!

### Input
```json
{
    "userId": "<userId",
    "password": "<plain_text_password>"
}
```

### Output
```json
{
    "success": "true|false",
    "sessionId": "<sessionId>
}
```
